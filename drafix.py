"""
    Fix DRA file generated by inFakt'
"""
import argparse

import zus


def parse_args() -> argparse.Namespace:
    """
    Parse script arguments

    :return:
    """
    parser = argparse.ArgumentParser(description='Fix DRA file generated by inFakt')
    parser.add_argument('document_id', help='ID card or passport number')
    parser.add_argument('dra_file', help='DRA file name')
    parser.add_argument('-n', '--no-backup', help='Does not create backup file', action='store_true')
    parser.add_argument('-d', '--debug', help='Debug mode', action='store_true')
    return parser.parse_args()


def main() -> None:
    """
    Main function
    """
    args = parse_args()

    dra_file = zus.kedu.KEDU()
    dra_file.load(args.dra_file)

    document_id = zus.identity_document.IdentityDocument(args.document_id)
    dra_file.add_id_document(document_id, args.debug)

    dra_file.save(backup=not args.no_backup)
    print('Done')


if __name__ == '__main__':
    main()
